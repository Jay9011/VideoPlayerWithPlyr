const videoManager={videoElement:null,videoUrl:null,player:null,init:async function(videoElementId,videoSrc,onEndCallback=null,controls=null,speed={selected:1,options:[1]},controllable=true){this.videoElement=document.getElementById(videoElementId);if(!this.videoElement){console.error("Video element�� ã�� �� �����ϴ�.");return}this.videoUrl=videoSrc;this.videoElement.controls=false;this.setVideoSources();const{default:Plyr}=await import("/library/plyr/plyr.min.js");this.setupPlyr(controls,speed,onEndCallback,controllable)},setupPlyr:function(controls,speed,onEndCallback,controllable){if(typeof Plyr==="undefined"){console.error("Plyr ���̺귯���� �ε���� �ʾҽ��ϴ�.");return}this.player=new Plyr(this.videoElement,{controls:controls||["play","progress","current-time","mute","volume","settings","fullscreen"]});this.player.on("ready",()=>{this.player.speed=speed});if(!controllable){this.disableControls()}if(onEndCallback){this.videoElement.addEventListener("ended",onEndCallback)}},disableControls:function(){this.videoElement.addEventListener("contextmenu",e=>{e.preventDefault()});const progress_bar=this.videoElement.closest(".plyr").querySelector(".plyr__progress__container");if(progress_bar){progress_bar.style.pointerEvents="none";progress_bar.addEventListener("click",e=>{e.stopPropagation();e.preventDefault()})}this.player.config.keyboard={focused:false,global:false}},getFileType:function(url){const extension=url.split(".").pop().toLowerCase();const mimeTypes={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",wmv:"video/x-ms-wmv",avi:"video/avi"};return mimeTypes[extension]||"video/mp4"},setVideoSources:function(){const sourceElement=document.createElement("source");sourceElement.src=this.videoUrl;this.videoElement.appendChild(sourceElement)},playVideo:function(){this.player.play()}};